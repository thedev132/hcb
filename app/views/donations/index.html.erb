<p id="notice"><%= notice %></p>

<h1>Donations</h1>

<%= paginate @donations %>
<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Project</th>
      <th>Donor</th>
      <th>Amount</th>
      <th>Status</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @donations.each do |donation| %>
      <tr>
        <td><%= donation.created_at.to_date %></td>
        <td>
          <%= link_to donation.event.name, event_donation_overview_path(donation.event) %>
        </td>
        <td>
        <%= donation.name %>
        <span class="muted h6 block">
        &lt;<%= link_to donation.email, "mailto:#{donation.name} <#{donation.email}>", class: 'inline' %>&gt;
        </span>
        </td>
        <td>
        <% if donation.amount == donation.amount_received %>
          <%= render_money donation.amount %>
        <% else %>
          <span class="muted h6 block"><%= render_money donation.amount_received %> out of</span>
          <%= render_money donation.amount %>
        <% end %>
        </td>
        <td>
        <span class="tooltipped tooltipped--w mr1" aria-label="<%= donation.status_text.capitalize %>">
          <%= status_badge donation.status_color %>
        </span>
          <%= donation.status %>
          <span class="muted h6 block"><%= link_to donation.stripe_payment_intent_id, donation.stripe_dashboard_url, target: '_blank' %></status>
        </td>
        <td><%= link_to 'Show', donation %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @donations %>